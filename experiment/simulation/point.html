<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <script class="gtm">
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-W59SWTR");
    </script>

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <!-- This file was originally generated at http://psd2cssonline.com on September 16, 2010, 10:04 am -->
    <!-- psd2css Online version 1.85 -->

    <title>Virtual Lab in Image Processing</title>

    <!-- Some META tags to help with Search Engine Optimization.  Please
note however that META tags are NOT a magic bullet to get your web page
to the top of search engine rankings.  They are just part of that effort.  You
can get more information by googling SEO or visiting the psd2css Online forums. -->
    <meta name="description" content="Put the description of this page here" />
    <meta
      name="keywords"
      content="Put keywords for this page here separated by commas"
    />
    <meta
      name="generator"
      content="psd2css Online - Dynamic Web Pages from your Photoshop Design in seconds"
    />

    <!-- The CSS Reset from Eric Meyers -->
    <!-- <link rel="stylesheet" type="text/css" href="cssreset.css" media="screen" /> -->

    <!-- The Primary External CSS style sheet. -->
    <link
      rel="stylesheet"
      type="text/css"
      href="css/psd2css.css"
      media="screen"
    />

    <!-- We use the jquery javascript library for DOM manipulation and
some javascript tricks.  We serve the script from Google because it's
faster than most ISPs.  Get more information and documentation
at http://jquery.com
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script> -->
    <script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>

    <!-- All the javascript generated for your design is in this file -->
    <script type="text/javascript" src="js/psd2css.js"></script>

    <!-- For Jquery UI-->
    <script
      type="text/javascript"
      src="js/jquery-ui-1.8.4.custom.min.js"
    ></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="css/dark-hive/jquery-ui-1.8.4.custom.css"
    />

    <!-- For Slider - http://carpe.ambiprospect.com/slider/-->
    <link type="text/css" rel="StyleSheet" href="css/carpe-slider.css" />
    <script type="text/javascript" src="js/carpe-slider.js"></script>

    <!--http://www.cssmenumaker.com/builder/menu_info.php?menu=057-->
    <link type="text/css" rel="StyleSheet" href="menu/menu_style.css" />

    <!--for ImgSelect - http://odyniec.net/projects/imgareaselect/-->
    <link
      rel="stylesheet"
      type="text/css"
      href="css/imgareaselect-default.css"
    />
    <script type="text/javascript" src="js/jquery.imgareaselect.js"></script>

    <!--for Flot -->
    <script type="text/javascript" src="js/jquery.flot.js"></script>

    <!--for COntent Slider - Jquery Slider/-->
    <link rel="stylesheet" type="text/css" href="css/jquery-slider.css" />

    <!-- opencv.js  -->
    <script
      async
      src="https://docs.opencv.org/4.10.0/opencv.js"
      type="text/javascript"
    ></script>

    <script type="text/javascript">
      var inputMosaic = null;
      var croppedImage = null;
      var processedImage = null;

      function blinker(i) {
        if (buttId != "cancel" && i > 0) {
          $($(buttId), "#Layer-2").toggleClass("ui-state-hover");
          setTimeout("blinker(" + (i - 1) + ")", 500);
        }
      }

      function set_state(state) {
        switch (state) {
          case 0:
            $("#nextBox").html(
              "Start the Experiment by clicking on 'Select Image' and selecting an Input Image from the Mosaic"
            );
            buttId = "button1";
            blinker(10);
            break;
          case 1:
            if (assess) {
              loadImage("images/assess/point1_1.png").then((cImage) => {
                croppedImage = cImage;
              });
            }
            $("#nextBox").html(
              "Select appropriate parameters and click on 'Run'."
            );
            buttId = "button2";
            blinker(10);
            break;
          case 2:
            $("#nextBox").html("Click on 'Reset' to start again.");
            break;
        }
        jstate = state;
      }

      function toggleMosaic() {
        var ias = $("#Mosaic").imgAreaSelect({ instance: true });
        if ($("#Mosaic").is(":visible")) {
          ias.setOptions({ hide: true });
          $("#Mosaic").hide("slow");
        } else {
          $("#Mosaic").show("slow", function () {
            ias.setOptions({ show: true });
            ias.update();
          });
        }
      }

      function set_crop() {
        set_state(1);

        var ias = $("#Mosaic").imgAreaSelect({ instance: true });
        var sel = ias.getSelection();

        loadImage("images/Mosaic.png").then((inputMat) => {
          inputMosaic = inputMat;

          cropImage(
            inputMat,
            "layer4Image",
            sel.x1,
            sel.y1,
            sel.width,
            sel.height
          );
        });
      }

      function cropImage(inputMat, output_img, x, y, w, h) {
        let src = inputMat;
        let rect = new cv.Rect(x, y, w, h);
        let dst = new cv.Mat(w, h, cv.CV_8UC3);
        dst = src.roi(rect);
        croppedImage = dst.clone();
        let canvas = document.createElement("canvas");
        cv.imshow(canvas, dst);
        let dataUrl = canvas.toDataURL();
        let croppedImageElement = document.getElementById(output_img);
        croppedImageElement.src = dataUrl;
        src.delete();
        dst.delete();
      }

      function doTransform() {
        if (jstate == 0) {
          alert("First click on Mosaic and select the Input Image.");
          return;
        }

        var args_opt, args_m, args_c, args_a, args_b, args_beta;

        if (document.getElementById("Linear-rad").checked) {
          args_opt = 1;
          args_m = $("#slider-cSa").slider("option", "value");
          args_c = $("#slider-cSb").slider("option", "value");
        }
        if (document.getElementById("nonLinear-rad").checked) {
          args_opt = 2;
          args_c = $("#slider-logc").slider("option", "value");
        }
        if (document.getElementById("Clipper-rad").checked) {
          args_opt = 3;
          args_a = $("#Clipper-a-display").attr("value");
          args_b = $("#Clipper-b-display").attr("value");
          args_beta = $("#Clipper-beta-display").attr("value");
        }
        if (document.getElementById("Windower-rad").checked) {
          args_opt = 4;
          args_a = $("#Windower-a-display").attr("value");
          args_b = $("#Windower-b-display").attr("value");
          args_beta = $("#Windower-beta-display").attr("value");
        }

        set_state(2);

        if (!$("#Mosaic").is(":visible")) {
          $("#slider").remove();

          processImage(croppedImage, {
            args_opt,
            args_m,
            args_c,
            args_a,
            args_b,
            args_beta,
          });

          let canvas1 = document.createElement("canvas");
          cv.imshow(canvas1, croppedImage);
          document.getElementById("initialImage").src = canvas1.toDataURL();

          let canvas2 = document.createElement("canvas");
          cv.imshow(canvas2, processedImage);
          document.getElementById("processedImage").src = canvas2.toDataURL();
          document.getElementById("layer5outputImage").src =
            canvas2.toDataURL();

          var myImage = new Image();
          myImage.name = $("img", $("#Layer-5")).attr("name");
          myImage.src = $("img", $("#Layer-5")).attr("src");
          myImage.onload = function () {
            $("dims", "#imgInfo").html(this.height + " x " + this.width);
          };
        }
      }

      function clamp(value, min, max) {
        return Math.min(Math.max(value, min), max);
      }

      function Contrast_Stretch(src, m, c) {
        let final_img = new cv.Mat();
        src.copyTo(final_img);

        let tan_m = Math.tan((m * Math.PI) / 180);

        for (let i = 0; i < src.rows; i++) {
          for (let j = 0; j < src.cols; j++) {
            let pixelValue = src.ucharPtr(i, j)[0];
            let grval = tan_m * pixelValue + c;
            grval = clamp(grval, 0, 255);
            final_img.ucharPtr(i, j)[0] = grval;
          }
        }

        return final_img;
      }

      function Log_Image(src, c) {
        let final_img = new cv.Mat();
        src.copyTo(final_img);

        for (let i = 0; i < src.rows; i++) {
          for (let j = 0; j < src.cols; j++) {
            let pixelValue = src.ucharPtr(i, j)[0];
            let grval = c * Math.log10(1 + pixelValue);
            grval = clamp(grval, 0, 255);
            final_img.ucharPtr(i, j)[0] = grval;
          }
        }
        return final_img;
      }

      function Clipped_Image(src, a, b, beta) {
        let final_img = new cv.Mat();
        src.copyTo(final_img);

        for (let i = 0; i < src.rows; i++) {
          for (let j = 0; j < src.cols; j++) {
            let pixelValue = src.ucharPtr(i, j)[0];
            let grval;
            if (pixelValue < a) grval = 0;
            else if (pixelValue > b) grval = 255;
            else grval = beta * pixelValue;
            grval = clamp(grval, 0, 255);
            final_img.ucharPtr(i, j)[0] = grval;
          }
        }
        return final_img;
      }

      function Windowed_Image(src, a, b, beta) {
        let final_img = new cv.Mat();
        src.copyTo(final_img);

        for (let i = 0; i < src.rows; i++) {
          for (let j = 0; j < src.cols; j++) {
            let pixelValue = src.ucharPtr(i, j)[0];
            let grval;
            if (pixelValue < a || pixelValue > b) grval = 0;
            else grval = beta * pixelValue;
            grval = clamp(grval, 0, 255);
            final_img.ucharPtr(i, j)[0] = grval;
          }
        }
        return final_img;
      }

      async function processImage(inputImg, args) {
        let resultImage = null;
        let inp = new cv.Mat();
        cv.cvtColor(inputImg, inp, cv.COLOR_RGBA2GRAY);

        let mesg = "";
        switch (args["args_opt"]) {
          case 1:
            mesg = `Linear Transform,<br/>f(r)= ${args["args_m"]}r + ${args["args_c"]}`;
            resultImage = Contrast_Stretch(inp, args["args_m"], args["args_c"]);
            break;
          case 2:
            mesg = `Non-Linear Transform,<br/>f(r)= ${args["args_c"]}log10(1+r)`;
            resultImage = Log_Image(inp, args["args_c"]);
            break;
          case 3:
            mesg = `Clipping,<br/>between ${args["args_a"]} and ${args["args_b"]},slope=${args["args_beta"]}`;
            resultImage = Clipped_Image(
              inp,
              args["args_a"],
              args["args_b"],
              args["args_beta"]
            );
            break;
          case 4:
            mesg = `Windowing,<br/>between ${args["args_a"]} and ${args["args_b"]},slope=${args["args_beta"]}`;
            resultImage = Windowed_Image(
              inp,
              args["args_a"],
              args["args_b"],
              args["args_beta"]
            );
            break;
        }
        processedImage = resultImage.clone();
        console.log("Processed Image: ", processedImage);

        let content = `<div class="item">
        <h2>Initial Image</h2>
        <img id="initialImage" alt="picture" width="140px" height="140px"/>
      </div>
      <div class="item">
        <h2>Processed Image</h2>
        <img id="processedImage" alt="picture" width="140px" height="140px"/>
        <dl class="details ui-helper-clearfix"><dt>${mesg}</dt></dl>
      </div><br><br>`;

        $("#sliderContent").html(content);
      }

      function redrawGraph(temp) {
        var plot = $.plot($("#placeholder"), [{ color: "cyan", data: temp }], {
          series: {
            lines: { show: true },
            points: { show: false },
          },
          grid: { hoverable: false, clickable: false },
          yaxis: { min: 0, max: 255 },
        });
      }

      function confirmTo(url) {
        var response = confirm("You will lose Session Data: Continue?");
        if (response) {
          window.location.href = url;
        }
      }
      var exp, assess, id, state, currentS;
      var slope_param,
        const_param,
        r_param,
        a_param,
        b_param,
        a1_param,
        b1_param,
        beta1_param,
        beta2_param;
      var session = {
        start: function () {
          exp = "point";
          assess = getQueryVariable("assess");
          id = getQueryVariable("assess");
          state = 0;
          currentS = 1;
          slope_param = 45;
          const_param = 0;
          r_param = 106;
          a_param = 50;
          b_param = 200;
          a1_param = 100;
          b1_param = 150;
          beta1_param = 45;
          beta2_param = 45;
        },
      };

      // Function to retrieve query parameters from URL
      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i = 0; i < vars.length; i++) {
          var pair = vars[i].split("=");
          if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
          }
        }
        return null;
      }

      function loadImage(url) {
        return new Promise((resolve, reject) => {
          let img = new Image();
          img.crossOrigin = "Anonymous";
          img.src = url;
          img.onload = () => {
            let canvas = document.createElement("canvas");
            canvas.width = img.width;
            canvas.height = img.height;
            let ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0);
            let imgData = ctx.getImageData(0, 0, img.width, img.height);
            let mat = new cv.Mat(imgData.height, imgData.width, cv.CV_8UC4);
            mat.data.set(imgData.data);
            resolve(mat);
          };
          img.onerror = (err) => reject(err);
        });
      }

      session.start();
      function onOpenCvReady() {
        console.log("OpenCV.js is ready.", cv.getBuildInformation);

        $(document).ready(function () {
          if (exp === "piping") {
            set_state(1);
          } else if (assess) {
            set_state(1);
          } else {
            set_state(0);
          }

          $(".imageFull").hide();
          $("#popUp").hide();
          (wind = []), (cont = []), (log = []), (clip = []);
          {
            var m1 = Math.tan(beta1_param * (Math.PI / 180)).toPrecision(2);
            var m2 = Math.tan(beta2_param * (Math.PI / 180)).toPrecision(2);

            var a = Math.tan(slope_param * (Math.PI / 180)).toPrecision(2);
            var b = const_param;
            for (var i = 0; i < 256; i += 1) {
              log.push([i, (r_param * Math.log(i + 1)) / Math.LN10]);

              if (a * i + b > 0) {
                cont.push([i, a * i + b]);
              } else {
                cont.push([i, 0]);
              }

              if (i < a_param || i > b_param) {
                if (i > b_param) {
                  clip.push([i, 255]);
                } else {
                  clip.push([i, 0]);
                }
              } else {
                clip.push([i, i * m1]);
              }
              if (i < a1_param || i > b1_param) {
                wind.push([i, 0]);
              } else {
                wind.push([i, i * m2]);
              }
            }

            redrawGraph(cont);
          }

          $("button1").each(function () {
            if (!assess) {
              $(this).show();
            }
          });

          $("button1", "#Layer-2").button();
          $("button1", "#Layer-2").click(function () {
            toggleMosaic();
          });

          $("button2", "#Layer-2").button();
          $("#choice").buttonset();
          $("#choice").button("refresh");
          $(".Parameters").hide();
          $("#Linear").show();
          $("button5", "#Parameters").button();
          $("button5", "#Parameters").click(function () {
            $("#popUp").show();
          });
          $("button5", "#Parameters").hide();

          $("button6", "#popUp").button();
          $("button6", "#popUp").click(function () {
            $("#popUp").hide();
          });
          $("button4", "#Layer-2").button();
          $("button4", "#Layer-2").click(function () {
            $("#slider-cSa").slider("option", "value", 45);
            $("#slider-cSb").slider("option", "value", 0);

            if (!assess) {
              set_state(0);
            } else {
              set_state(1);
            }

            $("dims", "#imgInfo").html("____ x ____ ");
            $("img", $("#Layer-5")).attr("src", "images/Layer-5.jpg");

            $("img", $("#Layer-4")).attr(
              "src",
              assess
                ? "images/assess/" + id + "_" + currentS + ".png"
                : "images/Layer-4.jpg"
            );

            $("#sliderContent").replaceWith(
              '<div id="sliderContent" class="ui-corner-all"><div class="viewer ui-corner-all"><div class="content-conveyor ui-helper-clearfix"><div class="item"><h2>' +
                (assess ? "Assessment" : "Start") +
                '</h2><img src="images/assess/' +
                id +
                "_" +
                currentS +
                '.png" alt="picture" width="140px" height="140px"/><dl class="details ui-helper-clearfix"><dt>' +
                (assess
                  ? "This is the Input Image. Perform Operations to get the above result."
                  : "Select a portion of the Mosaic on the Right and Transform... ") +
                '</dt></dl></div></div></div><div id="slider"></div></div>'
            );
          });

          $("button2", "#Layer-2").click(function () {
            doTransform();
          });

          $("#Mosaic").imgAreaSelect({
            handles: true,
            movable: true,
            persistent: true,
            resizable: false,
            x1: 300,
            y1: 300,
            x2: 600,
            y2: 600,
            hide: false,
            imageHeight: 900,
            imageWidth: 900,
          });
          toggleMosaic();

          // new js
          var titleText = assess ? "Assessment" : "Start";
          $("#itemTitle").text(titleText);

          var imgSrc = assess
            ? "images/assess/" + id + "_" + currentS + ".png"
            : "images/Mosaic.png";
          $("#itemImage").attr("src", imgSrc);

          var descriptionText = assess
            ? "This is the Input Image. Perform Operations to get the above result."
            : "Select a portion of the Mosaic on the Right and Transform...";
          $("#itemDescription").text(descriptionText);

          var imgSrc = "";
          if (assess) {
            imgSrc = "images/assess/" + id + "_" + currentS + ".png";
          } else {
            imgSrc = "images/Layer-4.jpg";
          }

          $("#layer4Image").attr("src", imgSrc);
        });
      }

      Module = {
        onRuntimeInitialized: onOpenCvReady,
      };
    </script>
  </head>

  <body>
    <!-- This is 'Backgound_bkgnd_center_jpg' -->
    <div id="Layer-1" class="Backgound_bkgnd_center_jpg">
      <!-- This is 'Mosaic_jpg' -->
      <div id="Mosaic" class="Mosaic_jpg">
        <img src="images/Mosaic.png" width="513" height="513" alt="Mosaic" />
      </div>

      <!-- This is 'Thumbnails_jpg' -->
      <div id="Layer-7" class="Thumbnails_jpg">
        <div id="sliderContent" class="ui-corner-all">
          <div class="viewer ui-corner-all">
            <div class="content-conveyor ui-helper-clearfix">
              <div class="item">
                <h2 id="itemTitle"></h2>
                <img
                  id="itemImage"
                  src=""
                  alt="picture"
                  width="140px"
                  height="140px"
                />
                <dl class="details ui-helper-clearfix">
                  <dt id="itemDescription"></dt>
                </dl>
              </div>
            </div>
          </div>
          <div id="slider"></div>
        </div>
      </div>

      <!-- This Is 'outputLayer_jpg' -->
      <div id="Layer-5" class="outputLayer_jpg">
        <img
          src="images/Layer-5.jpg"
          alt="outputLayer"
          id="layer5outputImage"
          overflow="hidden"
        />
      </div>

      <!-- This is 'InputLayer_jpg' -->
      <div id="Layer-4" class="InputLayer_jpg">
        <img
          id="layer4Image"
          src=""
          width="281"
          height="281"
          alt="InputLayer"
        />
      </div>

      <!-- This is 'TopBar_jpg' -->
      <div id="Layer-3" class="TopBar_jpg">
        <!-- <img src="images/Layer-3.jpg" width="894" height="96" alt="TopBar" /> -->
        <!-- This is 'IIIT' -->
        <!-- <div id="Layer-6" class="IIIT"  >
      <img src="images/iiit.png" width="100" height="70" alt="IIIT" class="pngimg" />
  </div> -->

        <div id="topMenu">
          <!-- <h1 style="text-align: center;">Virtual Lab for IMAGE PROCESSING</h1> -->
          <div class="menu">
            <!-- <div class="home">
<a onclick="confirmTo('index.html')">home</a>
</div> -->
            <!-- <ul>
<li><a href="objective.php?exp=point" target="_self" >Objective</a>
</li>
<li><a href="intro.php?exp=point" target="_self" >Introduction</a>
</li>
<li><a href="theory.php?exp=point" target="_self" >Theory</a>
</li>
<li><a href="procedure.php?exp=point" target="_self" >Procedure</a>
</li>
<li><sel><a href="point.php" target="_self" >Experiment</a>
</sel></li>
<li><a href="#" target="_self" >Assessment</a>
              <ul>
                  <li><a href="quiz.php?exp=point">Quiz</a></li>
                  <li><a href="assign.php?exp=point">Assignment</a></li>
             </ul>

</li> -->
            <!--<li><a href="references.php?exp=point" target="_self" >References</a>
</li>-->
            <!-- <li><a href="summary.php" target="_blank" >Summary</a>
</li>
</ul> -->
          </div>
        </div>
      </div>

      <div id="imgInfo">
        <table>
          <tr>
            <th width="290">Input size</th>
            <th>Output size</th>
          </tr>
          <tr>
            <td>300 x 300</td>
            <td>
              <dims> ____ x ____ </dims>
            </td>
          </tr>
        </table>
      </div>

      <div id="zoom"></div>

      <!-- This is 'Parameters_jpg' -->
      <div id="Layer-2">
        <h2 style="text-align: center">Point Operations</h2>
        <div id="nextBox"></div>

        <button1 style="display: none">Select Image</button1>
        <button4>Reset</button4>
        <button2>Run</button2>

        <br /><br />

        <div id="choice">
          <input
            type="radio"
            id="Linear-rad"
            name="choice1"
            checked="true"
            onclick="$('.Parameters').hide();$('#Linear').show();redrawGraph(cont);"
          /><label for="Linear-rad">Linear</label>
          <input
            type="radio"
            id="nonLinear-rad"
            name="choice1"
            onclick="$('.Parameters').hide();$('#nonLinear').show();redrawGraph(log);"
          /><label for="nonLinear-rad">Non-Linear</label>
          <input
            type="radio"
            id="Clipper-rad"
            name="choice1"
            onclick="$('.Parameters').hide();$('#clipper').show();redrawGraph(clip);"
          /><label for="Clipper-rad">Clipping</label>
          <input
            type="radio"
            id="Windower-rad"
            name="choice1"
            onclick="$('.Parameters').hide();$('#windower').show();redrawGraph(wind);"
          /><label for="Windower-rad">Window</label>
        </div>

        <div class="Parameters" id="Linear">
          f(r) =
          <input
            type="text"
            readonly
            id="cS-slider-display"
            maxlength="10"
            value="0"
            size="10"
          />
          <br />slope (m):
          <div id="slider-cSa" class="paraSlider"></div>
          offset (c):
          <div id="slider-cSb" class="paraSlider"></div>
          <script type="text/javascript">
            $(function () {
              $("#slider-cSa").slider({
                value: slope_param,
                min: -89,
                max: 89,
                step: 1,
                slide: function (event, ui) {
                  $("#cS-slider-display").attr(
                    "value",
                    Math.tan(ui.value * (Math.PI / 180)).toPrecision(3) +
                      "r + " +
                      $("#slider-cSb").slider("option", "value")
                  );
                },
                change: function (event, ui) {
                  var cont2 = [];
                  var a = Math.tan(
                    $("#slider-cSa").slider("option", "value") * (Math.PI / 180)
                  ).toPrecision(2);
                  var b = $("#slider-cSb").slider("option", "value") * 1;
                  for (var i = 0; i < 256; i++) {
                    if (a * i + b > 0) {
                      cont2.push([i, a * i + b]);
                    } else {
                      cont2.push([i, 0]);
                    }
                  }
                  redrawGraph(cont2);
                  cont = cont2;
                },
              });

              $("#slider-cSb").slider({
                value: const_param,
                min: -255,
                max: 255,
                step: 1,
                slide: function (event, ui) {
                  if (ui.value >= 0) {
                    $("#cS-slider-display").attr(
                      "value",
                      Math.tan(
                        $("#slider-cSa").slider("option", "value") *
                          (Math.PI / 180)
                      ).toPrecision(2) +
                        "r + " +
                        ui.value
                    );
                  } else {
                    $("#cS-slider-display").attr(
                      "value",
                      Math.tan(
                        $("#slider-cSa").slider("option", "value") *
                          (Math.PI / 180)
                      ).toPrecision(2) +
                        "r - " +
                        -ui.value
                    );
                  }
                },
                change: function (event, ui) {
                  var cont2 = [];
                  var a = Math.tan(
                    $("#slider-cSa").slider("option", "value") * (Math.PI / 180)
                  ).toPrecision(2);
                  var b = $("#slider-cSb").slider("option", "value") * 1;
                  for (var i = 0; i < 256; i++) {
                    if (a * i + b > 0) {
                      cont2.push([i, a * i + b]);
                    } else {
                      cont2.push([i, 0]);
                    }
                  }
                  redrawGraph(cont2);
                  cont = cont2;
                },
              });
              $("#cS-slider-display").attr("value", "1.00r + 0");
            });
          </script>
        </div>
        <div class="Parameters" id="nonLinear" style="height: 86px" ;>
          Log Function
          <br />
          f(r) =
          <input
            type="text"
            readonly
            id="SliderLog-display"
            maxlength="20"
            value="106"
            size="20"
          />
          <br />c:
          <div id="slider-logc" class="paraSlider"></div>

          <script type="text/javascript">
            $(function () {
              $("#slider-logc").slider({
                value: r_param,
                min: 0,
                max: 254,
                step: 2,
                slide: function (event, ui) {
                  $("#SliderLog-display").attr(
                    "value",
                    ui.value + " x log10 (1 + r)"
                  );
                },
                change: function (event, ui) {
                  var log2 = [];
                  var c = $("#slider-logc").slider("option", "value") * 1;
                  var r = $("#slider-logr").slider("option", "value") * 1;
                  for (var i = 0; i < 255; i++) {
                    log2.push([i, (c * Math.log(i + 1)) / Math.LN10]);
                  }
                  redrawGraph(log2);
                  log = log2;
                },
              });

              $("#SliderLog-display").attr(
                "value",
                r_param + " x log10 (1 + r)"
              );
            });
          </script>
        </div>
        <div id="clipper" class="Parameters">
          Clipper
          <br />
          Window Start:
          <input
            type="text"
            readonly
            id="Clipper-a-display"
            maxlength="10"
            value="50"
            size="3"
          />
          End:
          <input
            type="text"
            readonly
            id="Clipper-b-display"
            maxlength="10"
            value="200"
            size="3"
          />

          <div id="clipper-range-slider" class="paraSlider"></div>
          Slope:
          <input
            type="text"
            readonly
            id="Clipper-beta-display"
            maxlength="10"
            value="0"
            size="3"
          />

          <div id="clipper-beta-slider" class="paraSlider"></div>

          <script type="text/javascript">
            $(function () {
              $("#clipper-range-slider").slider({
                range: true,
                min: 0,
                max: 255,
                values: [a_param, b_param],
                slide: function (event, ui) {
                  $("#Clipper-a-display").attr("value", ui.values[0]);
                  $("#Clipper-b-display").attr("value", ui.values[1]);
                },
                change: function (event, ui) {
                  var clip2 = [];
                  var a = ui.values[0];
                  var b = ui.values[1];
                  var m = Math.tan(
                    $("#clipper-beta-slider").slider("option", "value") *
                      (Math.PI / 180)
                  ).toPrecision(2);
                  for (var i = 0; i < 256; i++) {
                    if (i >= a && i <= b) {
                      clip2.push([i, i * m]);
                    } else {
                      if (i > b) {
                        clip2.push([i, 255]);
                      } else {
                        clip2.push([i, 0]);
                      }
                    }
                  }
                  redrawGraph(clip2);
                  clip = clip2;
                },
              });

              $("#Clipper-a-display").attr("value", a_param);
              $("#Clipper-b-display").attr("value", b_param);

              $("#clipper-beta-slider").slider({
                value: beta1_param,
                min: 0,
                max: 45,
                step: 1,
                slide: function (event, ui) {
                  $("#Clipper-beta-display").attr(
                    "value",
                    Math.tan(ui.value * (Math.PI / 180)).toPrecision(2)
                  );
                },
                change: function (event, ui) {
                  var clip2 = [];
                  var a = $("#Clipper-a-display").attr("value");
                  var b = $("#Clipper-b-display").attr("value");
                  var m = Math.tan(ui.value * (Math.PI / 180)).toPrecision(2);
                  for (var i = 0; i <= 256; i++) {
                    if (i >= a && i <= b) {
                      clip2.push([i, i * m]);
                    } else {
                      if (i > b) {
                        clip2.push([i, 255]);
                      } else {
                        clip2.push([i, 0]);
                      }
                    }
                  }
                  redrawGraph(clip2);
                  clip = clip2;
                },
              });
              $("#Clipper-beta-display").attr(
                "value",
                Math.tan(
                  $("#clipper-beta-slider").slider("option", "value") *
                    (Math.PI / 180)
                ).toPrecision(2)
              );
            });
          </script>
        </div>

        <div id="windower" class="Parameters">
          Windowing
          <br />

          Window Start:
          <input
            type="text"
            readonly
            id="Windower-a-display"
            maxlength="10"
            value="100"
            size="3"
          />
          End:
          <input
            type="text"
            readonly
            id="Windower-b-display"
            maxlength="10"
            value="150"
            size="3"
          />

          <div id="Windower-range-slider" class="paraSlider"></div>
          Slope:
          <input
            type="text"
            readonly
            id="Windower-beta-display"
            maxlength="10"
            value="0"
            size="3"
          />

          <div id="Windower-beta-slider" class="paraSlider"></div>

          <script type="text/javascript">
            $(function () {
              $("#Windower-range-slider").slider({
                range: true,
                min: 0,
                max: 255,
                values: [a1_param, b1_param],
                slide: function (event, ui) {
                  $("#Windower-a-display").attr("value", ui.values[0]);
                  $("#Windower-b-display").attr("value", ui.values[1]);
                },
                change: function (event, ui) {
                  var wind2 = [];
                  var a = ui.values[0];
                  var b = ui.values[1];
                  var m = Math.tan(
                    $("#Windower-beta-slider").slider("option", "value") *
                      (Math.PI / 180)
                  ).toPrecision(2);
                  for (var i = 0; i < 256; i++) {
                    if (i >= a && i <= b) {
                      wind2.push([i, i * m]);
                    } else {
                      wind2.push([i, 0]);
                    }
                  }
                  redrawGraph(wind2);
                  wind = wind2;
                },
              });

              $("#Windower-a-display").attr("value", a1_param);
              $("#Windower-b-display").attr("value", b1_param);

              $("#Windower-beta-slider").slider({
                value: beta2_param,
                min: 0,
                max: 45,
                step: 1,
                slide: function (event, ui) {
                  $("#Windower-beta-display").attr(
                    "value",
                    Math.tan(ui.value * (Math.PI / 180)).toPrecision(2)
                  );
                },
                change: function (event, ui) {
                  var wind2 = [];
                  var a = $("#Windower-a-display").attr("value");
                  var b = $("#Windower-b-display").attr("value");
                  var m = Math.tan(ui.value * (Math.PI / 180)).toPrecision(2);
                  for (var i = 0; i <= 256; i++) {
                    if (i >= a && i <= b) {
                      wind2.push([i, i * m]);
                    } else {
                      wind2.push([i, 0]);
                    }
                  }
                  redrawGraph(wind2);
                  wind = wind2;
                },
              });
              $("#Windower-beta-display").attr(
                "value",
                Math.tan(
                  $("#Windower-beta-slider").slider("option", "value") *
                    (Math.PI / 180)
                ).toPrecision(2)
              );
            });
          </script>
        </div>
        <div
          id="placeholder"
          style="margin-left: 20px; width: 220px; height: 220px"
        ></div>
      </div>
      <br />
    </div>
  </body>
</html>
